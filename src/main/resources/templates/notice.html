<!doctype html>
<!doctype html>
<html class="no-js" lang="en">
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Norda - Minimal eCommerce HTML Template</title>
    <meta name="robots" content="noindex, follow"/>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Favicon -->
    <link rel="shortcut icon" type="image/x-icon" href="/images/favicon.png">

    <!-- All CSS is here
	============================================ -->

    <link rel="stylesheet" href="/css/vendor/bootstrap.min.css">
    <link rel="stylesheet" href="/css/vendor/signericafat.css">
    <link rel="stylesheet" href="/css/vendor/cerebrisans.css">
    <link rel="stylesheet" href="/css/vendor/simple-line-icons.css">
    <link rel="stylesheet" href="/css/vendor/elegant.css">
    <link rel="stylesheet" href="/css/vendor/linear-icon.css">
    <link rel="stylesheet" href="/css/plugins/nice-select.css">
    <link rel="stylesheet" href="/css/plugins/easyzoom.css">
    <link rel="stylesheet" href="/css/plugins/slick.css">
    <link rel="stylesheet" href="/css/plugins/animate.css">
    <link rel="stylesheet" href="/css/plugins/magnific-popup.css">
    <link rel="stylesheet" href="/css/plugins/jquery-ui.css">
    <link rel="stylesheet" href="/css/style.css">

    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <!-- Use the minified version files listed below for better performance and remove the files listed above
    <link rel="stylesheet" href="/css/vendor/vendor.min.css">
    <link rel="stylesheet" href="/css/plugins/plugins.min.css">
    <link rel="stylesheet" href="/css/style.min.css"> -->

</head>

<body>

<input type="hidden" id="userId" th:value="${session.session_current_user.getUserId()}">

<div class="main-wrapper">
    <header class="header-area sticky-bar bg-top section-padding-1">
        <div class="container-fluid">
            <div class="header-large-device">
                <div class="header-bottom">
                    <div class="row align-items-center">
                        <div class="col-xl-3 col-lg-3">
                            <div class="logo">
                                <a href="index"><img src="images/logo/logo.png" alt="logo"></a>
                            </div>
                        </div>
                        <div class="col-xl-7 col-lg-7">
                            <div class="main-menu main-menu-padding-1 main-menu-lh-1">
                                <nav>
                                    <ul>
                                        <li><a href="index">主页</a></li>
                                        <li><a href="shop">购物</a></li>
                                        <li><a href="release">发布</a></li>
                                    </ul>
                                </nav>
                            </div>
                        </div>
                        <div class="col-xl-2 col-lg-2">
                            <div class="header-action header-action-flex header-action-mrg-right">
                                <div class="same-style-2 header-search-1">
                                    <a class="search-toggle" href="#">
                                        <i class="icon-magnifier s-open"></i>
                                        <i class="icon_close s-close"></i>
                                    </a>
                                    <div class="search-wrap-1">
                                        <form action="#">
                                            <label>
                                                <input placeholder="Search products…" type="text">
                                            </label>
                                            <button class="button-search"><i class="icon-magnifier"></i></button>
                                        </form>
                                    </div>
                                </div>
                                <div class="same-style-2">
                                    <a href="userlogin"><i class="icon-user"></i></a>
                                </div>
                                <div class="same-style-2 header-cart">
                                    <a href="cart">
                                        <i class="icon-basket-loaded"></i><!--<span class="pro-count red">02</span>-->
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <div class="cart-main-area pt-115 pb-120">
        <div class="container">
            <h3 class="cart-page-title">您的通知</h3>
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                    <form action="#">
                        <div class="table-content table-responsive cart-table-content">
                            <table>
                                <thead>
                                <tr>
                                    <th>时间</th>
                                    <th>内容</th>
                                    <th>状态</th>
                                </tr>
                                </thead>
                                <tbody id="vue_notice_display">
                                <tr v-for="notice_ele in notice_list">
                                    <td class="product-thumbnail"><a href="#">{{ notice_ele.time2 }} {{ notice_ele.time1
                                        }}</a></td>
                                    <!--                                    <td class="product-thumbnail"><a href="#">1</a></td>-->
                                    <!--                                    <td class="product-price-cart"><span>2</span></td>-->
                                    <!--                                    <td class="product-remove">-->
                                    <!--                                        <a :id="'notice-status-'+notice_ele.id" onclick=""><span>3</span></a>-->
                                    <td class="product-price-cart"><span>{{ notice_ele.content }}</span></td>
                                    <td class="product-price-cart">
                                        <a :id="'noticestatus-'+notice_ele.id"
                                           onclick="change_states(id)"><span>{{ notice_ele.status }}</span></a>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <!--                        <div class="row">-->
                        <!--                            <div class="col-lg-12">-->
                        <!--                                <div class="cart-shiping-update-wrapper">-->
                        <!--                                    <div class="cart-shiping-update">-->
                        <!--                                        <a href="#">Continue Shopping</a>-->
                        <!--                                    </div>-->
                        <!--                                    <div class="cart-clear">-->
                        <!--                                        <button onclick="delete_all_cart()">Delete All</button>-->
                        <!--                                        <a href="#">Clear Cart</a>-->
                        <!--                                    </div>-->
                        <!--                                </div>-->
                        <!--                            </div>-->
                        <!--                        </div>-->
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="subscribe-area bg-gray pt-115 pb-115">
        <div class="container">
            <div class="row">
                <div class="col-lg-5 col-md-5">
                    <div class="section-title">
                        <h2>keep connected</h2>
                        <p>Get updates by subscribe our weekly newsletter</p>
                    </div>
                </div>
                <div class="col-lg-7 col-md-7">
                    <div id="mc_embed_signup" class="subscribe-form">
                        <form id="mc-embedded-subscribe-form" class="validate subscribe-form-style" novalidate=""
                              target="_blank" name="mc-embedded-subscribe-form" method="post"
                              action="http://devitems.us11.list-manage.com/subscribe/post?u=6bbb9b6f5827bd842d9640c82&amp;id=05d85f18ef">
                            <div id="mc_embed_signup_scroll" class="mc-form">
                                <input class="email" type="email" required="" placeholder="Enter your email address"
                                       name="EMAIL" value="">
                                <div class="mc-news" aria-hidden="true">
                                    <input type="text" value="" tabindex="-1"
                                           name="b_6bbb9b6f5827bd842d9640c82_05d85f18ef">
                                </div>
                                <div class="clear">
                                    <input id="mc-embedded-subscribe" class="button" type="submit" name="subscribe"
                                           value="Subscribe">
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <footer class="footer-area bg-gray pb-30">
        <div class="container">
            <div class="row">
                <div class="col-lg-6 col-md-6">
                    <div class="contact-info-wrap">
                        <div class="footer-logo">
                            <a href="#"><img src="/images/logo/logo.png" alt="logo"></a>
                        </div>
                        <div class="single-contact-info">
                            <span>Our Location</span>
                            <p>869 General Village Apt. 645, Moorebury, USA</p>
                        </div>
                        <div class="single-contact-info">
                            <span>24/7 hotline:</span>
                            <p>(+99) 052 128 2399</p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6">
                    <div class="footer-right-wrap">
                        <div class="footer-menu">
                            <nav>
                                <ul>
                                    <li><a href="index.html">home</a></li>
                                    <li><a href="shop.html">Shop</a></li>
                                    <li><a href="shop.html">Product </a></li>
                                    <li><a href="contact.html">Contact</a></li>
                                    <li><a href="blog.html">Blog.</a></li>
                                </ul>
                            </nav>
                        </div>
                        <div class="social-style-2 social-style-2-mrg">
                            <a href="#"><i class="social_twitter"></i></a>
                            <a href="#"><i class="social_facebook"></i></a>
                            <a href="#"><i class="social_googleplus"></i></a>
                            <a href="#"><i class="social_instagram"></i></a>
                            <a href="#"><i class="social_youtube"></i></a>
                        </div>
                        <div class="copyright">
                            <p>Copyright © 2020 HasThemes | <a href="http://www.bootstrapmb.com/">Built with
                                <span>Norda</span> by HasThemes</a>.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>
</div>

<!-- All JS is here
============================================ -->


<script>
    // function get_notice() {
    //     var userId = document.getElementById("userId").value;
    //     // alert(id);
    //     // var fuck_idx = id.indexOf("-");
    //     // var product_id = id.substring(fuck_idx+1);
    //     var urlPath = window.document.location.href;
    //     var docPath = window.document.location.pathname;
    //     var index = urlPath.indexOf(docPath);
    //     var serverPath = urlPath.substring(0, index);
    //     var formData = new FormData();
    //     formData.append("userId", Number(userId));
    //     // formData.append("productId", Number(product_id));
    //     $.ajax({
    //         url: serverPath + "/get-notice",
    //         type: "post",
    //         data: formData,
    //         contentType: false,
    //         processData: false,
    //         success: function (res) {
    //             if (res.code === 200) {
    //                 alert("successfly delete this one");
    //                 location.reload();
    //                 // window.location.href="/product-details/" + res.data;
    //             } else {
    //                 alert(res.msg);
    //             }
    //         },
    //         error: function (data) {
    //             alert("delete this good failed");
    //         }
    //     });
    //     return false;
    // }
    function change_states(noticeid) {
        var fuck_idx = noticeid.indexOf("-");
        var idd = noticeid.substring(fuck_idx+1);
        alert(idd);
        var urlPath = window.document.location.href;
        var docPath = window.document.location.pathname;
        var index = urlPath.indexOf(docPath);
        var serverPath = urlPath.substring(0, index);
        var formData = new FormData();
        formData.append("id", Number(idd));
        $.ajax({
            url: serverPath + "/change-notice",
            type: "post",
            data: formData,
            contentType: false,
            processData: false,
            success: function (res) {
                if (res.code === 200) {
                    var a = document.getElementById(noticeid);
                    a.firstChild.innerHTML = "已读";
                    alert("successfly change");
                    // location.reload();
                    // window.location.href="/product-details/" + res.data;
                } else {
                    alert(res.msg);
                }
            },
            error: function (data) {
                alert("change notice state failed");
            }
        });
        return false;
    }

    function delete_all_cart() {
        var userId = document.getElementById("userId").value;
        // alert(userId);
        var urlPath = window.document.location.href;
        var docPath = window.document.location.pathname;
        var index = urlPath.indexOf(docPath);
        var serverPath = urlPath.substring(0, index);
        var formData = new FormData();
        formData.append("userId", Number(userId));
        $.ajax({
            url: serverPath + "/delete-all-cart",
            type: "post",
            data: formData,
            contentType: false,
            processData: false,
            success: function (res) {
                if (res.code === 200) {
                    alert("successfly delete");
                    // location.reload();
                    // window.location.href="/product-details/" + res.data;
                } else {
                    alert(res.msg);
                }
            },
            error: function (data) {
                alert("delete All cart failed");
            }
        });
        return false;
    }

    // var list = [{good_name : 'hello', price : 10}];
    window.onload = function () {
        var userId = document.getElementById("userId").value;
        // alert(userId)
        var urlPath = window.document.location.href;
        var docPath = window.document.location.pathname;
        var index = urlPath.indexOf(docPath);
        var serverPath = urlPath.substring(0, index);
        var formData = new FormData();
        formData.append("userid", Number(userId));
        alert(Number(userId));
        alert(serverPath);
        $.ajax({
            url: serverPath + "/get-notice",
            type: "post",
            data: formData,
            contentType: false,
            processData: false,
            success: function (res) {
                if (res.code === 200) {
                    alert("nb");
                    // alert(res.data);
                    var vm = new Vue({
                        el: '#vue_notice_display',
                        data: {
                            notice_list: res.data
                        },
                    });
                    // alert(cart_list[0].good_name);
                    // window.location.href="/product-details/" + res.data;
                } else {
                    alert(res.msg);
                }
            },
            error: function (data) {
                alert("notice load failed");
            }
        });
        return false;
    }


</script>


<script src="/js/vendor/modernizr-3.6.0.min.js"></script>
<script src="/js/vendor/jquery-3.5.1.min.js"></script>
<script src="/js/vendor/jquery-migrate-3.3.0.min.js"></script>
<script src="/js/vendor/bootstrap.bundle.min.js"></script>
<script src="/js/plugins/slick.js"></script>
<script src="/js/plugins/jquery.syotimer.min.js"></script>
<script src="/js/plugins/jquery.instagramfeed.min.js"></script>
<script src="/js/plugins/jquery.nice-select.min.js"></script>
<script src="/js/plugins/wow.js"></script>
<script src="/js/plugins/jquery-ui-touch-punch.js"></script>
<script src="/js/plugins/jquery-ui.js"></script>
<script src="/js/plugins/magnific-popup.js"></script>
<script src="/js/plugins/sticky-sidebar.js"></script>
<script src="/js/plugins/easyzoom.js"></script>
<script src="/js/plugins/scrollup.js"></script>
<script src="/js/plugins/ajax-mail.js"></script>

<!-- Use the minified version files listed below for better performance and remove the files listed above
<script src="/js/vendor/vendor.min.js"></script>
<script src="/js/plugins/plugins.min.js"></script>  -->
<!-- Main JS -->
<script src="/js/main.js"></script>

</body>

</html>